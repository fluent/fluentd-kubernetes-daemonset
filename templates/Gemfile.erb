<% fluentd_ver = version.split("-").first[1..-1] %>
<% is_v1 = fluentd_ver.start_with?('1') %>
<% target = (dockerfile.split("/").last.split("-").last) %>
<% is_alpine = (dockerfile.split("/").last.split("-").first == "alpine") %>
# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/Gemfile.erb

source "https://rubygems.org"

gem "fluentd", "<%= fluentd_ver %>"
<% if !is_v1 %>
gem "fluent-plugin-secure-forward"
gem "fluent-plugin-record-reformer"
<% end %>
<% case target when "elasticsearch" %>
gem "fluent-plugin-elasticsearch"
<% when "logentries" %>
#gem "fluent-plugin-logentries"
<% when "loggly"%>
gem "fluent-plugin-loggly"
<% when "cloudwatch" %>
<% if is_v1 %>
gem "aws-sdk-cloudwatchlogs", "~> 1.0"
gem "fluent-plugin-cloudwatch-logs", ">=0.5"
<% else %>
gem "aws-sdk-core", "2.10.50"
gem "fluent-plugin-cloudwatch-logs", "0.4.0"
<% end %>
<% when "stackdriver" %>
gem "fluent-plugin-google-cloud"
<% when "s3" %>
<% if is_v1 %>
gem "aws-sdk-s3", "~> 1.0"
gem "fluent-plugin-s3", "~>1.0"
<% else %>
gem "fluent-plugin-s3", "~>0.8"
<% end %>
<% when "gcs" %>
<% if is_v1 %>
gem "fluent-plugin-gcs", "0.4.0.beta1"
<% else %>
gem "fluent-plugin-gcs", "~>0.3"
<% end %>
<% when "graylog" %>
gem "gelf", git: "https://github.com/graylog-labs/gelf-rb.git"
gem "fluent-plugin-gelf-hs"
<% when "logzio" %>
gem "fluent-plugin-logzio"
<% when "papertrail" %>
gem "fluent-plugin-papertrail"
<% when "syslog" %>
gem "fluent-plugin-kubernetes_remote_syslog", git: "https://github.com/georgegoh/fluent-plugin-kubernetes_remote_syslog.git"
<% when "kafka" %>
gem "fluent-plugin-kafka"
<% end %>
gem "fluent-plugin-kubernetes_metadata_filter"
<% if !is_alpine %>
gem "ffi"
gem "fluent-plugin-systemd"
<% end %>
