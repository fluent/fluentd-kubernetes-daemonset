
# AUTOMATICALLY GENERATED
# DO NOT EDIT THIS FILE DIRECTLY, USE /templates/conf/fluent.conf.erb

@include kubernetes.conf

# Prometheus metric exposed on 0.0.0.0:24231/metrics
<source>
  @type prometheus
</source>

<match **>
  @type splunk_hec
  host "#{ENV['FLUENT_SPLUNK_HEC_HOST'] || nil}"
  port "#{ENV['FLUENT_SPLUNK_HEC_PORT'] || '8089'}"
  token "#{ENV['FLUENT_SPLUNK_HEC_TOKEN'] || nil}"

  # metadata parameter
  default_source "#{ENV['FLUENT_SPLUNK_HEC_SOURCE'] || 'fluentd-splunkhec'}"
  sourcetype "#{ENV['FLUENT_SPLUNK_HEC_SOURCE_TYPE'] || 'fluentd-splunkhec'}"

  use_fluentd_time "#{ENV['FLUENT_SPLUNK_HEC_USE_FLUENTD_TIME'] || true}"

  # ack parameter
  use_ack "#{ENV['FLUENT_SPLUNK_HEC_USE_ACK'] || false}"
  ack_interval "#{ENV['FLUENT_SPLUNK_HEC_ACK_INTERVAL'] || '1'}"
  ack_retry_limit "#{ENV['FLUENT_SPLUNK_HEC_ACK_RETRY_LIMIT'] || '3'}"

  # ssl parameter
  use_ssl "#{ENV['FLUENT_SPLUNK_HEC_USE_SSL'] || true}"
  ssl_verify "#{ENV['FLUENT_SPLUNK_HEC_SSL_VERIFY'] || true}"
  ca_file "#{ENV['FLUENT_SPLUNK_HEC_CA_FILE'] || '/etc/ssl/certs/ca-bundle.crt'}"

  # buffered output parameter
  flush_interval "#{ENV['FLUENT_SPLUNK_HEC_FLUSH_INTERVAL'] || '10s'}"

</match>

